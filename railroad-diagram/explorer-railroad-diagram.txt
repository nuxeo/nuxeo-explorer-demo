Diagram(
  Stack(
    Terminal('Start Build'),
    Group(Stack(
        Sequence(
          Choice(0,
            'Pick Package List from Resources',
            'Define Package List Manually',
          ),
        ),
        Sequence(
          Choice(0,
            Optional('Pick Connect Prod URL'),
            'Pick Connect Preprod URL',
          ),
          Choice(0,
            Optional('Define Connect CLID'),
          ),
        ),
        Choice(0,
          Optional('Fill Explorer Production Auth Token'),
        ),
        Sequence(
          Choice(0,
            Optional('Choose Target Nuxeo Plaftorm Version'),
          ),
          Choice(0,
            Optional('Choose Explorer Build GitHub Master Branch (CI)'),
            'Choose Explorer Build GitHub Branch (Maintenance/Dev/Debug)',
            'Choose Explorer Build GitHub Release Tag',
          ),
         ),
      ), 'Job Parameters'),
    Group(Stack(
        'Checkout Explorer Build Branch Defined in Parameters',
        Choice(0,
          'Build Server for Explorer Build',
          'Download Server for Chosen Target Nuxeo Platform Version',
        ),
        Sequence(
          Optional('Setup Connect URL Defined in Parameters'),
          Optional('Install CLID Defined in Parameters'),
        ),
        Choice(0,
          'Install Explorer Package from Maven Resource',
          'Install Explorer Package from Connect',
        ),
        'Install Package(s) Defined in Parameters from Connect',
        Sequence(
          'Start Server',
          NonTerminal('Perform Export (curl command with Administrator user auth)'),
          'Stop Server',
        ),
      ), 'Pipeline Build (tools-nuxeo-ftest logics) on QA Slave'),
    Group(Stack(
        'Archive Export',
        Choice(0,
          Optional('Import in Explorer Production Site Using Token Auth Defined In Parameters'),
        ),
      ), 'Archiving/Push'),
    Terminal('Stop Build'),
  ),
)
