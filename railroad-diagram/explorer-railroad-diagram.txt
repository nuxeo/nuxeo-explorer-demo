Diagram(
  Stack(
    Terminal('Start Build'),
    Group(Stack(
        Sequence(
          'Pick Explorer Export Type (TBD)',
          Choice(0,
            'Define Single Package',
            'Define Package List',
          ),
        ),
        Sequence(
          Choice(0,
            Optional('Pick Connect Prod URL'),
            'Pick Connect Preprod URL',
          ),
          Choice(0,
            Optional('Define Connect CLID'),
          ),
        ),
        Choice(0,
          Optional('Fill Explorer Production Auth (TBD)'),
          Optional('Fill Alternative Auth (TBD)'),
        ),
        Sequence(
          Choice(0,
            Optional('Choose Target Nuxeo Plaftorm Version'),
          ),
          Choice(0,
            Optional('Choose Explorer Build GitHub Master Branch (CI)'),
            'Choose Explorer Build GitHub Branch (Maintenance/Dev/Debug)',
            'Choose Explorer Build GitHub Tag (Release/Customers)',
          ),
         ),
      ), 'Job Parameters'),
    Group(Stack(
        'Checkout Explorer Build Branch Defined in Parameters',
        Choice(0,
          'Build Server for Explorer Build',
          'Download Server for Chosen Target Nuxeo Platform Version (HFs)',
        ),
        Sequence(
          Optional('Setup Connect URL Defined in Parameters'),
          Optional('Install CLID Defined in Parameters'),
        ),
        Choice(0,
          'Install Explorer Package from Maven Resource',
          'Install Explorer Package from Connect',
        ),
        'Install Potential HotFixes from Connect',
        'Install Package(s) Defined in Parameters from Connect',
        Sequence(
          'Start Server',
          Group(
            NonTerminal('Perform Export as Defined In Parameters (curl command with Administrator user auth)'),
            'Export Type Logics (TBD)',
          ),
          'Stop Server',
        ),
      ), 'Pipeline Build (tools-nuxeo-ftest logics) on QA Slave'),
    Group(Stack(
        'Archive Export',
        Choice(0,
          Optional('Import in Explorer Production Site Using Auth Defined In Parameters'),
          Optional('Push Archive Elsewhere Depending on Alternative Auth (?)'),
          Optional('Commit Export in Target Nuxeo Repository and Create PR (?)'),
        ),
      ), 'Archiving/Push'),
    Terminal('Stop Build'),
  ),
)
