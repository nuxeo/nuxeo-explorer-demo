<html>
<head>
  <meta charset="utf-8" />
  <title>Nuxeo Plotly Rendering</title>
  <style>
    .plotly-graph-selection {
      text-align:center;
    }
    .plotly-graph-div {
      display: inline-block;
    }
  </style>
</head>
<body>
<div>
  <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
  <script src="./plotly/plotly-latest.min.js"></script>
  <script src="./plotly/plotly_nuxeo.js" charset="utf-8"></script>
  <div id="selection" class="plotly-graph-selection">
    <form>
      Select datasource:
      <select id="ds">
        <option value="data/gephi.json" selected="selected">Nuxeo Test Graph</option>
        <option value="data/gephi_flat.json">Nuxeo Test Graph Flat</option>
        <option value="data/gephi_bundles.json">Nuxeo Test Bundles</option>
        <option value="data/gephi_xp.json">Nuxeo Test XP Graph</option>
        <option value="data/gephi_xp_flat.json">Nuxeo Test XP Graph Flat</option>
        <option value="data/complete_graph_ref.json">Nuxeo Complete Graph</option>
        <option value="data/complete_bundles_graph_ref.json">Nuxeo Complete Bundle Graph</option>
        <option value="data/complete_xp_graph_ref.json">Nuxeo Complete XP graph</option>
      </select>
    </form>
    <div id="graph" class="plotly-graph-div"></div>
  </div>
  <script type="text/javascript">
    var select = document.getElementById('ds');
    var datasource = select.value;
    var datasource_title = select.options[select.selectedIndex].label;
    select.addEventListener('change', function() {
      datasource = this.value;
      datasource_title = this.options[this.selectedIndex].label;
      NXPlotly.render(datasource, datasource_title, 'graph');
    });
    window.onload = function() {
      NXPlotly.render(datasource, datasource_title, 'graph');
    }
  </script>
</div>
</body>
</html>